/*!CK:2030235591!*//*1442380652,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["WoMep"]); }

__d('PrivacyCustomTypeahead',['Typeahead'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;i=babelHelpers.inherits(k,h);j=i&&i.prototype;function k(l,m,n,o,p){'use strict';j.constructor.call(this,l,m,n,o);this._bootstrapExclusion=JSON.parse(p);}k.prototype.containsBootstrapExclusion=function(l){'use strict';var m=parseInt(l,10);return this._bootstrapExclusion.indexOf(m)>-1;};k.prototype.addBootstrapExclusion=function(l){'use strict';var m=parseInt(l,10);this._bootstrapExclusion.push(m);};k.prototype.removeBootstrapExclusion=function(l){'use strict';var m=parseInt(l,10),n=this._bootstrapExclusion.indexOf(m);if(n>-1)this._bootstrapExclusion.splice(n,1);};f.exports=k;},null);
__d('PrivacyCustomControl',['CSS','Button','DOM','Event','PrivacyCustomDialogConstants'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=114000975315193;function n(u){return u.tokens.length>0&&u.input.value.trim().length===0;}function o(u){return u.input.value.trim().length===0;}function p(u,v){var w=j.find(v.input.form,'button'),x=n(u)&&o(v);i.setEnabled(w,x);}function q(){}Object.assign(q,{init:function(u,v,w,x,y,z,aa,ba){var ca=function(ga,ha){if(ha){u.typeahead.removeBootstrapExclusion(ga);}else u.typeahead.addBootstrapExclusion(ga);},da=JSON.parse(x.value),ea=function(ga){var ha=((ga!==null)<<1)+(da.length>0);j.setContent(ba,l.CUSTOM_DISCLAIMER_TEXT[ha]);h.show(ba);},fa=function(){var ga=r(u),ha=s(u);if(ga&&ha){ea(ga);return;}else if(ga||ha)for(var ia=0;ia<u.tokens.length;ia++)if(u.tokens[ia].info.type=='user'||u.tokens[ia].info.type=='friendlist'){ea(ga);return;}h.hide(ba);};u.input.onkeyup=function(event){p(u,v);};v.input.onkeyup=function(event){p(u,v);};u.subscribe('addToken',function(ga,ha){t(v,ha.info.uid);if(o(v)){var ia=j.find(u.input.form,'button');i.setEnabled(ia,true);}if(ha.info.uid==m&&v.tokens.length>0)h.show(z);if(ha.info.uid==l.CUSTOM_DIALOG_TOKEN_FOF){ca(ha.info.uid,false);w.value=l.CUSTOM_DIALOG_FOF;}else if(ha.info.uid==l.CUSTOM_DIALOG_TOKEN_FRIENDS){ca(ha.info.uid,false);if(!r(u))w.value=l.CUSTOM_DIALOG_FRIENDS;}else if(ha.info.type==l.CUSTOM_TOKEN_TYPE_GROUP){ca(ha.info.uid,false);da.push(Number(ha.info.uid));x.value='['+da.join()+']';if(r(u)||s(u)){fa();return;}if(u.tokens.length==da.length){w.value=l.CUSTOM_DIALOG_ONLY_ME;}else w.value=l.CUSTOM_DIALOG_SOME_FRIENDS;}else if(!r(u)&&!s(u))w.value=l.CUSTOM_DIALOG_SOME_FRIENDS;if(aa!==null)h.conditionShow(aa,r(u)||s(u));fa();});u.subscribe('removeToken',function(ga,ha){var ia=ha.info.type==l.CUSTOM_TOKEN_TYPE_GROUP;if(ia){var ja=da.indexOf(parseInt(ha.info.uid,10));da.splice(ja,1);x.value=da;}if(ia||ha.info.type==l.CUSTOM_TOKEN_TYPE_FRIEND_OR_FOF)ca(ha.info.uid,true);if(u.tokens.length===0){w.value=l.CUSTOM_DIALOG_ONLY_ME;var ka=j.find(u.input.form,'button');i.setEnabled(ka,false);}else if(!r(u)&&s(u)){w.value=l.CUSTOM_DIALOG_FRIENDS;}else if(u.tokens.length==da.length){w.value=l.CUSTOM_DIALOG_ONLY_ME;}else if(!r(u)&&!s(u))w.value=l.CUSTOM_DIALOG_SOME_FRIENDS;if(aa!==null&&(!r(u)&&!s(u)))h.hide(aa);if(ha.info.uid==m)h.hide(z);fa();});v.subscribe('addToken',function(ga,ha){t(u,ha.info.uid);h.show(y);u.tokens.forEach(function(ja){if(ja.info.uid==m){h.show(z);return;}});if(n(u)){var ia=j.find(u.input.form,'button');i.setEnabled(ia,true);}});v.subscribe('removeToken',function(ga,ha){h.conditionShow(y,v.tokens.length);h.conditionShow(z,v.tokens.length);});},initDeprecated:function(u,v,w,x,y,z,aa){k.listen(u,'change',function(){var ca=u.options[u.selectedIndex];h.conditionShow(v.getElement(),h.hasClass(ca,'showInclusions'));var da=h.hasClass(y,'explainTags');if(!da)return;var ea=h.hasClass(ca,'expandTag');if(j.scry(y,'.expandCheckbox')[0]){h.conditionShow(j.find(y,'.expandCheckbox'),ea);h.show(j.find(y,'.noExpandNotice'));}else{h.conditionShow(j.find(y,'.expandNotice'),ea);h.conditionShow(j.find(y,'.noExpandNotice'),!ea);}});var ba=function(){var ca=u.options[u.selectedIndex],da=function(fa){if(!fa)return false;var ga=j.scry(fa,"input");return ga.some(function(ha){return ha.checked;});},ea=da(z);h.conditionShow(aa,!h.hasClass(ca,'hideExclusionUnit')||ea);};k.listen(u,'change',ba);z&&j.scry(z,"input").forEach(function(ca){k.listen(ca,'change',ba);});v.subscribe('addToken',function(ca,da){t(w,da.info.uid);});w.subscribe('addToken',function(ca,da){t(v,da.info.uid);h.show(x);});}});var r=function(u){return u.getToken(l.CUSTOM_DIALOG_TOKEN_FOF);},s=function(u){return u.getToken(l.CUSTOM_DIALOG_TOKEN_FRIENDS);},t=function(u,v){var w=u.getToken(v);w&&u.removeToken(w);};f.exports=q;},null);
__d('TypeaheadCustomPrivacyShowSuggestionsOnFocus',['PrivacyCustomDialogConstants','TypeaheadShowResultsOnFocus'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;j=babelHelpers.inherits(l,i);k=j&&j.prototype;l.prototype.getUidsFromData=function(m){'use strict';var n=m.getAllEntries(),o=[];for(var p in n)if((n[p].type==h.CUSTOM_TOKEN_TYPE_GROUP||n[p].type==h.CUSTOM_TOKEN_TYPE_FRIEND_OR_FOF)&&!this._typeahead.containsBootstrapExclusion(n[p].uid))o.push({uid:n[p].uid,index:n[p].index});o.sort(function(q,r){return q.index-r.index;});return o.map(function(q){return q.uid;});};function l(){'use strict';j.apply(this,arguments);}f.exports=l;},null);