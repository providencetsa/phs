/*!CK:67256582!*//*1454998409,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["8da5J"]); }

__d("PrivacyRemindersLoggingTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ONLY_ME_IMPRESSION:"only_me_impression",ONLY_ME_CONVERSION:"only_me_conversion",EVERYONE_IMPRESSION:"everyone_impression",EVERYONE_CONVERSION:"everyone_conversion",EVERYONE_TESTS_IMPRESSION:"everyone_tests_impression",EVERYONE_TESTS_CONVERSION:"everyone_tests_conversion",PUBLIC_POSTING_FILTER_NUX_IMPRESSION:"public_posting_filter_nux_impression",PUBLIC_POSTING_FILTER_NUX_CONVERSION:"public_posting_filter_nux_conversion",DELTA_EVERYONE_IMPRESSION:"delta_everyone_impression",DELTA_EVERYONE_CONVERSION:"delta_everyone_conversion",DELTA_EVERYONE_OK_BUTTON_CLICKED:"delta_everyone_ok_button_clicked",DELTA_EVERYONE_CHANGE_BUTTON_CLICKED:"delta_everyone_change_button_clicked"};},null);
__d("SuggestionConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GROUP_POST_COMPOSER:"grouppostcomposer",OG_SUGGESTION_BY_INPUT:"ogsuggestionbyinput",COMPOSER_ENTRY_BOOTSTRAP:"composerentrybootstrap",MTOUCH_COMPOSER_ENTRY_BOOTSTRAP:"mtouchcomposerentrybootstrap",MTOUCH_COMPOSER_LOAD_VERBS:"mtouchcomposerloadverbs"};},null);
__d("SuggestionUIPresentation",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FLYOUT:1,TAGGER_BADGE:2,ADD_TAG:3,SEMI_INLINE:4,TOP_OF_VERBS:5};},null);
__d('ComposerXAttachment',['ComposerXStore'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){'use strict';}i.prototype.getRoot=function(){'use strict';};i.prototype.initWithComponents=function(j){'use strict';};i.prototype.cleanup=function(){'use strict';};i.prototype.reset=function(){'use strict';};i.prototype.getComponent=function(j){'use strict';return h.get(this._composerID,j);};i.prototype.getComponentInstance=function(j){'use strict';var k=h.get(this._composerID,j);return k&&k.instance;};i.prototype.canSwitchAway=function(){'use strict';return true;};i.prototype.setComposerID=function(j){'use strict';this._composerID=j;};i.prototype.getComposerID=function(){'use strict';return this._composerID;};i.prototype.allowOGTagPreview=function(){'use strict';return false;};Object.assign(i.prototype,{attachmentClassName:''});f.exports=i;},null);
__d('ComposerXAttachmentButtonBarState',['CSS','DOMQuery','csx','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={trackCityChanges:function(m){var n=m.getComponent('citysharericon');if(n)return n.instance.subscribe('change',function(){l.updateMessageBoxBarState(m);});},updateMessageBoxBarState:function(m){var n=m.getComponent('citysharericon');if(n){var o=i.find(m.getRoot(),"._1dsp");h.conditionClass(o,"_icv",!!n.instance.getValue());}}};f.exports=l;},null);
__d('ComposerXAttachmentPrefillMixin',['Event','InputSelection'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={_initPrefill:function(k,l){this._textArea=k;this._didInitialFocus=false;this._prefill=l;if(this._prefill)this._focusListener=h.listen(this._textArea,'focus',this._prefillOnFocus.bind(this));},_resetPrefill:function(){this._didInitialFocus=false;},_prefillOnFocus:function(){if(!this._didInitialFocus&&this._prefill&&this._textArea.value===''){this._textArea.value=this._prefill;i.set(this._textArea,0,0);}this._didInitialFocus=true;}};f.exports=j;},null);
__d('ComposerXAttachmentUtils',['BrowserSupport','Button','ComposerXController','DataStore','DOMQuery','Event','Focus','Keys','Run','StickyPlaceholderInput','UserAgent_DEPRECATED','csx','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u='composer_fixed_placeholder';function v(x,y){if(!k.get(x.element,u,false))x.instance.setPlaceholder(y);}var w={initMentions:function(x,y,z,aa){v(x,y.toString());if(!aa||!aa.dontFocusMentions)w.focusMentions(x);this.registerMentionsForComposerCancel(x,z);},focusMentions:function(x){var y=l.find(x.element,'textarea.input');n.set(y);},registerMentionsForComposerCancel:function(x,y){j.registerConditionForComposerCancel(y,x.instance.hasChanges.bind(x.instance));},setValueForMentions:function(x,y){var z=l.find(x.element,'textarea.input');z.value=y;},setStickyPlaceholderForMentions:function(x,y){v(x,y);},setPlaceholderIsFixed:function(x,y){k.set(x.element,u,!!y);},setStickyPlaceholderForTypeahead:function(x,y){var z=l.find(x,'.textInput');q.setPlaceholderText(z,y.toString());},listenForPostSubmission:function(x){m.listen(x,'keydown',function(event){var y=event.getModifiers(),z=r.osx()?y.meta:y.control,aa=l.find(x.form,"._11b"+'[type="submit"]');if(event.keyCode===o.RETURN&&z&&i.isEnabled(aa)){x.blur();if(m.fire(aa,'click'))m.fire(x.form,'submit');event.preventDefault();}});},disableSaveOnEmpty:function(x,y){var z=l.find(x,'.textInput'),aa=t(function(ca){i.setEnabled(y,z.value.trim().length!==0);},50),ba=[];ba.push(m.listen(z,'keyup',aa));if(h.hasClipboardEvents()){ba.push(m.listen(z,'cut',aa));ba.push(m.listen(z,'paste',aa));}else{ba.push(m.listen(z,'mouseout',aa));ba.push(m.listen(z,'mousemove',aa));}p.onUnload(function(){for(var ca=0;ca<ba.length;ca++)ba[ca].remove();ba=null;});}};f.exports=w;},null);
__d('ComposerXAttachmentWithPreviews',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={initPreviewButton:function(j,k){h.inform('page_composer_preview_form_initialized',j);}};f.exports=i;},null);
__d('FirstPhotoUploadLogger',['DOM','Event','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','csx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={log:function(event,n,o){if(!n||!o)return;var p=h.scry(o,"._yr");if(p.length!==0&&event!==j.DRAG_PHOTO_TO_COMPOSER)return;k.log({event:event,target_id:n});},bindClickUpload:function(n,o,p){i.listen(o,'click',(function(){this.log(j.CLICK_UPLOAD_PHOTO_IN_PHOTO_TAB,p,n);}).bind(this));}};f.exports=m;},null);
__d('ComposerXDragDrop',['Promise','Arbiter','ClipboardPhotoUploader','ComposerXAjaxEndpoint','ComposerXController','ComposerXDragDropUtils','ComposerXMediaUploadHandler','DragDropTarget','ErrorDialog','Event','FirstPhotoUploadLogger','PagesComposerPostActionsLoggerEvent','PUWMethods','URI','fbt','isAnimatedGif'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=k.MEDIA_UPLOAD,y=k.VIDEO_UPLOAD,z='/ajax/composerx/attachment/link/scraper/',aa=function(ca){ca();};function ba(ca,da,ea,fa){'use strict';this._root=ca;this._composerID=da;this._targetID=ea;fa=fa||aa;this._activatePasteHandler();this._dragdrop=new o(ca).setOnFilesDropCallback((function(ga){fa(this._dropFiles.bind(this,ga));}).bind(this)).setFileFilter(m.filterImages).enable();m.handleDragEnterAndLeave(ca);i.subscribe('composer/deactivateDragdrop',(function(){this.deactivate();}).bind(this));i.subscribe('composer/reactivateDragdrop',(function(){this.reactivate();}).bind(this));}ba.prototype.enableURLDropping=function(){'use strict';this._dragdrop.setOnURLDropCallback(this._onURLDrop.bind(this));};ba.prototype.deactivate=function(){'use strict';this._dragdrop.disable();this._deactivatePasteHandler();};ba.prototype.reactivate=function(){'use strict';this._activatePasteHandler();this._dragdrop.enable();};ba.prototype._activatePasteHandler=function(){'use strict';if(this._pasteHandler)return;this._pasteHandler=q.listen(this._root,'paste',(function(event){var ca=j.getImages(event);if(!ca.length)return;this._uploadFiles(ca,t.COPYPASTE);}).bind(this));};ba.prototype._deactivatePasteHandler=function(){'use strict';if(!this._pasteHandler)return;this._pasteHandler.remove();delete this._pasteHandler;};ba.prototype._uploadFiles=function(ca,da,ea){'use strict';if(ea){l.getAttachment(this._root,y);i.inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/videoupload',{files:ca},i.BEHAVIOR_PERSISTENT);}else{l.getAttachment(this._root,x);i.inform('ComposerXFilesStore/filesDropped/'+this._composerID+'/mediaupload',{files:ca,method:da},i.BEHAVIOR_PERSISTENT);}};ba.prototype._dropFiles=function(ca){'use strict';var da=ca.map(function(fa){return new h(function(ga){if(fa.type==='image/gif'&&n.canUploadAnimatedGIF()){ga(w(fa));}else if(fa.type.match('video/*')){ga(true);}else ga(false);});});for(var ea=0;ea<da.length;ea++)if(da[ea]._value===false){r.log(s.DRAG_PHOTO_TO_COMPOSER,this._targetID,this._root);break;}h.all(da).then((function(fa){if(this.validateMediaTypes(fa))this._uploadFiles(ca,t.DRAGDROP,fa[0]);}).bind(this));};ba.prototype._onURLDrop=function(ca){'use strict';var da=new u(z);da.addQueryData({scrape_url:encodeURIComponent(ca)});l.getAttachment(this._root,da.toString());};ba.prototype.validateMediaTypes=function(ca){'use strict';if(ca.length>1){var da=false,ea=false;for(var fa=0;fa<ca.length;fa++)if(ca[fa]){da=true;}else ea=true;if(da&&ea){p.show(v._("Can't upload both videos and images"),v._("Please select either one video or one or more images."));return false;}}return true;};f.exports=ba;},null);
__d('PagesComposerEntryLogger',['Event','PagesEventObserver'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this.$PagesComposerEntryLogger1=k;}j.prototype.registerForContentEntryEvents=function(k){'use strict';var l=function(){var m={page_id:this.$PagesComposerEntryLogger1,event_name:'composer_content_entry',pages_composer:1,target_id:this.$PagesComposerEntryLogger1};i.logData_DEPRECATED(m,i.VITAL_WAIT);this.unregister();};this.$PagesComposerEntryLogger2=h.listen(k,{paste:l.bind(this),keydown:l.bind(this)});};j.prototype.unregister=function(){'use strict';if(!this.$PagesComposerEntryLogger2)return;for(var event in this.$PagesComposerEntryLogger2)this.$PagesComposerEntryLogger2[event].remove();this.$PagesComposerEntryLogger2=null;};f.exports=j;},null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/privacy\/reminders\/log_imp\/",{type:{type:"String",required:true}});},null);
__d('ComposerXBootloadStatusAttachment',['requireWeak','Arbiter','AsyncRequest','Bootloader','ComposerEntryPointRef','ComposerXAttachment','ComposerXAttachmentButtonBarState','ComposerXAttachmentPrefillMixin','ComposerXAttachmentUtils','ComposerXAttachmentWithPreviews','ComposerXController','ComposerXDragDrop','ComposerXDragDropUtils','ComposerXMarauderLogger','ComposerXStore','CSS','DOM','DOMQuery','Event','Focus','NoNewerStoryInsertionWhileComposingGK','PageTransitions','PagesComposerEntryLogger','Parent','FocusListener','PrivacyConst','PrivacyRemindersLoggingTypes','ProductionPromptConfig','SelectorDeprecated','SubscriptionsHandler','SuggestionConfig','SuggestionUIPresentation','URI','XUIError','$','classWithMixins','createCancelableFunction','csx','cx','fbt','getActiveElement','mixin','requestAnimationFrame','XPrivacyRemindersDismissController','XPrivacyRemindersImpressionLoggingController','XReactComposerLoggingODSController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab){if(c.__markCompiled)c.__markCompiled();var bb,cb,db;h('LitestandStoryInsertionStatus',function(hb){db=hb;});var eb={only_me:{PRIVACY_CONSTANT:[ga.BaseValue.SELF],LOG_IMPRESSION:ha.ONLY_ME_IMPRESSION,LOG_CONVERSION:ha.ONLY_ME_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.EVERYONE_IMPRESSION,LOG_CONVERSION:ha.EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},delta_everyone:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.DELTA_EVERYONE_IMPRESSION,LOG_CONVERSION:ha.DELTA_EVERYONE_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},everyone_tests:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.EVERYONE_TESTS_IMPRESSION,LOG_CONVERSION:ha.EVERYONE_TESTS_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true},public_posting_filter_nux:{PRIVACY_CONSTANT:[ga.BaseValue.EVERYONE],LOG_IMPRESSION:ha.PUBLIC_POSTING_FILTER_NUX_IMPRESSION,LOG_CONVERSION:ha.PUBLIC_POSTING_FILTER_NUX_CONVERSION,LOG_IMPRESSION_TO_DISMISS_ENDPOINT:true}},fb={};bb=babelHelpers.inherits(gb,qa(m,wa(o,q)));cb=bb&&bb.prototype;function gb(hb,ib){'use strict';cb.constructor.call(this);this._root=hb;this._config=ib;this._privacyReminders={};this._onSelectorChange=this._onSelectorChange.bind(this);if(db&&ba.no_insertion_while_composing)db.registerBlocker((function(){return this._isFocused();}).bind(this));}gb.prototype.getRoot=function(){'use strict';return this._root;};gb.prototype.getPrivacyInstance=function(){'use strict';return this._newPrivacyWidgetInstance;};gb.prototype._getTextArea=function(){'use strict';return y.find(this.getComponent('maininput').element,'textarea.input');};gb.prototype.initWithComponents=function(hb){'use strict';fb[this._composerID]=this;this._attachmentIsActive=true;var ib=this._getTextArea(),jb=y.scry(ea.bySelector(this.getRoot(),"._119"),'li.'+this.attachmentClassName)[0];this._focusListener=z.listen(ib,'focus',this._onFocus.bind(this,'area_focus'));if(this._config.prefill_text)this._initPrefill(ib,this._config.prefill_text);if(hb&&this._config.targetIsPage){this._pagesComposerEntryLogger=new da(this._config.targetID);this._pagesComposerEntryLogger.registerForContentEntryEvents(ib);}if(this._fullVersion){this._fullInitWithComponents();}else if(!this._bootloading)if(this._isFocused()){this._onFocus('is_focused');}else if(jb)this._clickListener=z.listen(jb,'click',(function(){aa.set(ib);}).bind(this));this._dragEnterHandler=i.subscribe('dragenter',(function(kb,lb){if(lb.element==this._root){i.inform('composerprivacy/aborteducation');var mb=lb.event.dataTransfer.items,nb;if(mb)nb=t.filterImages(mb);if(nb&&nb.length>0){aa.set(ib);}else{var ob=ea.byClass(this._root,'focus_target');fa.expandInput(ob);this._onFocus('drag_focus');}}}).bind(this));this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(!hb)aa.set(ib);this._dragdrop=new s(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();this._initPrivacyWidgetInstance();if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);if(this._config.previewButton)this.initPreviewButton(this._root,this._config.previewButton);ca.registerHandler(this.cleanup.bind(this));};gb.prototype._initPrivacyWidgetInstance=function(){'use strict';var hb=this.getComponent('mainprivacywidget');if(!hb)return;this._privacyWidgetElement=hb.element;this._newPrivacyWidgetInstance=hb.instance&&hb.instance.getInstance().getInstance();if(this._newPrivacyWidgetInstance){var ib=this.getComponent('maininput').instance&&this.getComponent('maininput').instance.getMentions(),jb=this.getComponent('tagExpansionButton');jb&&jb.instance&&jb.instance.listenToPrivacy(this._newPrivacyWidgetInstance,ib);}};gb.prototype._fullInitWithComponents=function(hb){'use strict';this._bootloadCallback=ra(this._bootloadModules.bind(this));if(hb&&hb.show_tag_expansion_reminder){k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI","ComposerTagReminder"],this._bootloadCallback);}else k.loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper","URI"],this._bootloadCallback);Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);if(this._setEveryonePrivacyImpression)this._showPrivacyReminder('everyone');if(this._privacyReminders.delta_everyone&&this._privacyReminders.delta_everyone.dialog){var ib=this._privacyReminders.delta_everyone.dialog.getContent();if(ib){var jb=y.scry(ib,'.photoText')[0],kb=y.scry(ib,'.postText')[0];i.subscribe('multi-upload/images-added',(function(){jb&&w.show(jb);kb&&w.hide(kb);}).bind(this));i.subscribe('multi-upload/all-images-removed',(function(){jb&&w.hide(jb);kb&&w.show(kb);}).bind(this));}}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.subscribe('changed',this._onSelectorChange);}else ja.subscribe('select',this._onSelectorChange);i.inform('ComposerXBootloadStatusAttachment/mutate');};gb.prototype._bootloadModules=function(hb,ib,jb,kb,lb){'use strict';this._modulesAreBootloaded=true;this._tagger.init(this);this._privacyWidgetTags=new hb(this);if(lb){this._tagExpansionReminder=new lb(this);this._tagExpansionReminder.listen();}n.trackCityChanges(this);var mb=y.find(this.getComponent('maininput').element,'textarea.input');if(!this._scraper){this._scraper=new ib(mb);this._scraper.subscribe('match',(function(qb,rb){var sb=this._getScraperEndpoint();sb.addQueryData({scrape_url:encodeURIComponent(rb.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});var tb=this._config.isCarouselComposer;r.getAttachment(this._root,sb.toString(),null,tb);}).bind(this));}this._scraper.enable();this._scraper.check();var nb=x.scry(this._root,"._4-jj"),ob=this.getComposerID();if(this._config.stream_context==='home'&&nb&&nb.length&&this._tagger&&ob){if(!this._suggestionScraper){this._suggestionScraper=new jb(this._tagger,nb[0],[ma.SEMI_INLINE,ma.TAGGER_BADGE,ma.TOP_OF_VERBS],ob);this._suggestionScraper.setBootloadTriggerConfig(la.COMPOSER_ENTRY_BOOTSTRAP);}if(ia.gk){var pb=x.scry(this._root,'#bootloadSemiinlineRoot')[0];if(pb)w.hide(pb);}}};gb.prototype._showPrivacyReminder=function(hb){'use strict';var ib=this,jb=this._privacyReminders[hb],kb=eb[hb],lb=null;if(this._newPrivacyWidgetInstance){lb=this._newPrivacyWidgetInstance.getSelectedBaseValue();}else lb=parseInt(ja.getValue(this._privacyWidgetElement),10);if(!jb||!jb.dialog||jb.shown){if(lb===ga.BaseValue.EVERYONE&&this._setEveryonePrivacyImpression){this._sendSetEveryonePrivacyImpression();this._setEveryonePrivacyImpression=false;}return;}if(kb.PRIVACY_CONSTANT.indexOf(lb)===-1)return;jb.dialog.setContext(this._privacyWidgetElement).show();jb.shown=true;this._privacyReminderShown=true;if(kb.LOG_IMPRESSION){var mb=za.getURIBuilder().setString('type',kb.LOG_IMPRESSION).getURI();new j(mb).send();}if(kb.LOG_IMPRESSION_TO_DISMISS_ENDPOINT)if(hb==='delta_everyone'||hb==='only_me'){var nb=ya.getURIBuilder().setString('type',hb).getURI();new j(nb).send();}else new j('/ajax/privacy/reminders/dismiss').setData({type:hb,dismiss_type:'impression'}).send();var ob=(function(event){var pb=w.hasClass(event.target,'layerConfirm')||y.scry(event.target,'^.layerConfirm').length===1,qb=w.hasClass(event.target,'layerButton')||y.scry(event.target,'^.layerButton').length===1;if(pb&&hb!=='public_posting_filter_nux'){if(hb==='delta_everyone'||hb==='only_me'){var rb=za.getURIBuilder().setString('type',ha.DELTA_EVERYONE_OK_BUTTON_CLICKED).getURI();new j(rb).send();}return;}if(hb==='delta_everyone'||hb==='only_me'){var sb=ya.getURIBuilder().setString('type',hb).getURI();new j(sb).send();}else new j('/ajax/privacy/reminders/dismiss').setData({type:hb,hide:qb}).send();jb.events.forEach(function(ub){ub.remove();});jb.events=[];jb.dialog.hide();this._privacyReminderShown=false;if(qb){xa((function(){if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.openSelector();}else ja.toggle(y.scry(ib.getComponent('mainprivacywidget').element,'.uiSelector')[0]);}).bind(this));if(hb==='delta_everyone'){var tb=za.getURIBuilder().setString('type',ha.DELTA_EVERYONE_CHANGE_BUTTON_CLICKED).getURI();new j(tb).send();}}}).bind(this);if(this._newPrivacyWidgetInstance){jb.conversionListener=this._newPrivacyWidgetInstance.subscribe('changed',(function(pb,qb){var rb=this._newPrivacyWidgetInstance.getSelectedBaseValue();this._logPrivacyReminderConversion(jb,kb,rb);}).bind(this));}else jb.conversionListener=ja.subscribe('select',(function(pb,qb){if(qb.selector==this._privacyWidgetElement.firstChild){var rb=parseInt(ja.getValue(qb.option),10);this._logPrivacyReminderConversion(jb,kb,rb);}}).bind(this));jb.events=[z.listen(jb.dialog.getContent(),'click',ob),z.listen(jb.dialog.getContext(),'click',ob)];};gb.prototype._logPrivacyReminderConversion=function(hb,ib,jb){'use strict';if(ib.PRIVACY_CONSTANT.indexOf(jb)===-1){if(ib.LOG_CONVERSION){var kb=za.getURIBuilder().setString('type',ib.LOG_CONVERSION).getURI();new j(kb).send();}if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(hb.conversionListener);}else ja.unsubscribe(hb.conversionListener);hb.conversionListener=null;}};gb.prototype._onSelectorChange=function(hb,ib){'use strict';if(!this.getComponent('mainprivacywidget'))return;if(this._newPrivacyWidgetInstance||ib.selector===this._privacyWidgetElement.firstChild)setTimeout((function(){Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this);}).bind(this));if(this._tagExpansionReminder)this._tagExpansionReminder.updateReminderText(ib.post_param);};gb.prototype.cleanup=function(){'use strict';this._attachmentIsActive=false;if(this._focusListener){this._focusListener.remove();this._focusListener=null;}if(this._clickListener){this._clickListener.remove();this._clickListener=null;}Object.keys(eb).forEach((function(hb){var ib=this._privacyReminders[hb];if(ib&&ib.dialog&&ib.shown){ib.dialog.hide();ib.events.forEach(function(jb){jb.remove();});ib.events=[];if(ib.conversionListener)if(this._newPrivacyWidgetInstance){this._newPrivacyWidgetInstance.unsubscribe(ib.conversionListener);}else ja.unsubscribe(ib.conversionListener);ib.conversionListener=null;}}).bind(this));if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}if(this._modulesAreBootloaded){this._tagger.cleanup();if(this._privacyWidgetTags){this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;}this._scraper.disable();}if(this._bootloadCallback){this._bootloadCallback.cancel();this._bootloadCallback=null;}if(this._dragEnterHandler){this._dragEnterHandler.unsubscribe();this._dragEnterHandler=null;}if(this._pagesComposerEntryLogger)this._pagesComposerEntryLogger.unregister();};gb.prototype.reset=function(){'use strict';var hb=ea.bySelector(this._root,".child_was_focused");if(hb)w.removeClass(hb,"child_was_focused");if(this._tagger)this._tagger.reset();if(this._scraper)this._scraper.reset();if(this._newPrivacyWidgetInstance)this._newPrivacyWidgetInstance.informTagsChanged([]);this.getComponent('maininput').instance.setPlaceholder(this._config.mentionsPlaceholder);if(this._config.prefill_text)this._resetPrefill();if(ia.gk)this._config.mentionsPlaceholder=ua._(["What's on your mind?","2340e43c54f5a3de9ca7fc0a7efc2cae"]);};gb.prototype.canSwitchAway=function(){'use strict';return !ea.byClass(this._root,'async_saving');};gb.prototype.bootloadAttachments=function(){'use strict';if(this._bootloading)return;this._bootloading=true;r.getEndpoint(this._root,'/ajax/composerx/attachment/status/bootload/',true);};gb.prototype.setBootloadedContent=function(hb){'use strict';this._bootloading=false;this._setEveryonePrivacyImpression=!!hb.set_everyone_privacy_impression;Object.keys(eb).forEach((function(mb){var nb=hb[mb+'_privacy_reminder'];if(nb)this._privacyReminders[mb]={dialog:nb};}).bind(this));if(hb.markup.privacy_widget){var ib=y.find(this._root,"._etn");x.setContent(ib,hb.markup.privacy_widget);var jb=y.find(this._root,"._1dwm");if(jb){jb.disabled=false;w.removeClass(jb,"_42fr");}}var kb=hb.placeholders.map(function(mb){return mb.component_name;});v.waitForComponents(this._composerID,kb,(function(){var mb=y.find(this._root,"._3-6"),nb=y.find(this._root,"._3-7");x.setContent(mb,hb.markup.tagger_content);x.setContent(nb,hb.markup.tagger_icons);if(hb.markup.privacy_widget)this._initPrivacyWidgetInstance();r.addPlaceholders(this._root,this,hb.placeholders);this._tagger=hb.tagger;n.updateMessageBoxBarState(this);this._fullVersion=true;if(this._attachmentIsActive)this._fullInitWithComponents(hb);p.registerMentionsForComposerCancel(this.getComponent('maininput'),this.getComposerID());}).bind(this));var lb=ab.getURIBuilder().setString('event','bootload_done').setEnum('composer_type',l.LEGACY_FEED).getURI();new j(lb).send();};gb.prototype._getScraperEndpoint=function(){'use strict';return new na('/ajax/composerx/attachment/link/scraper/');};gb.prototype._isFocused=function(){'use strict';return y.contains(this._root,va());};gb.prototype._isEditing=function(){'use strict';return this._isFocused()||this.getComponent('maininput').instance.hasChanges();};gb.prototype._onFocus=function(hb){'use strict';u.logEntry(this._composerID);var ib=x.scry(this._root,"._180_")[0];if(ia.gk&&this._config.stream_context==='home'&&ib){w.hide(pa('bootloadComposerPromptPlaceholder'));w.hide(pa('bootloadComposerPromptIcon'));var jb=pa('mentionsInput');x.find(jb,'textarea.mentionsTextarea').placeholder=ua._(["What's on your mind?","2340e43c54f5a3de9ca7fc0a7efc2cae"]);}this._prefillOnFocus();if(this._fullVersion||this._bootloading)return;i.inform('composer/focus',this._composerID);i.inform('composer/render_pab_nux');this.bootloadAttachments();};gb.prototype.allowOGTagPreview=function(){'use strict';return true;};gb.prototype._sendSetEveryonePrivacyImpression=function(){'use strict';new j('/ajax/privacy/reminders/set_everyone_privacy_impression').send();};gb.prototype.onEmptyStatusCallback=function(){'use strict';var hb=this._getTextArea();aa.set(hb);oa.set({target:hb,message:ua._("This status update appears to be blank. Please write something or attach a link or photo to update your status."),position:'below',alignh:'left'});new ka().addSubscriptions(z.listen(this.getRoot(),'success',(function(){oa.clear(this._getTextArea());}).bind(this)),i.subscribe('composer/publish',(function(event,ib){if(ib.composer_id!=this.getComposerID())return;oa.clear(this._getTextArea());}).bind(this)));};gb.setBootloadedContent=function(hb,ib){'use strict';var jb=fb[hb];if(jb)jb.setBootloadedContent.call(jb,ib);};gb.onEmptyStatusListener=function(hb){'use strict';var ib=fb[hb];if(ib)ib.onEmptyStatusCallback.call(ib);};Object.assign(gb.prototype,{_attachmentIsActive:false,_bootloading:false,_modulesAreBootloaded:false,_fullVersion:false,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_bootloadCallback:null,attachmentClassName:"_4j"});f.exports=gb;},null);
__d('ComposerXMediaPostTab',['Arbiter','ComposerXMediaUploadHandler','Event'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m){'use strict';h.inform('composer/reset_pab_nux');var n=new i(l);j.listen(m.getContainer(),'click',function(){h.inform('composerprivacy/aborteducation');n.fetchAttachments();m.getInput().disabled=false;});m.subscribe('change',function(){n.handleFileSelected(m);});}f.exports=k;},null);
__d('ComposerXMentionsInputReset',['DOMQuery','Input'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){var l=h.scry(k.element,'textarea.input')[0];k.instance.reset();i.reset(l);}f.exports=j;},null);
__d('ComposerXOGTaggerIconReset',['CSS','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){h.removeClass(k.element,"_4-jh");h.removeClass(k.element,"_509o");}f.exports=j;},null);
__d('ComposerXPrivacyWidgetReset',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j){h.inform('Composer/changedtags',{withTags:[],mention:{}});}f.exports=i;},null);
__d('ComposerXTaggerIconReset',['CSS','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){h.removeClass(k.element,"_1dsa");h.removeClass(k.element,"_1dsb");h.removeClass(k.element,"_509o");}f.exports=j;},null);